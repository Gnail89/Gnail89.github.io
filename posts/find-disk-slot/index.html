<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>硬盘驱动器与物理硬盘对应关系 | 📕W.'s Blog</title><meta name=keywords content="smartctl,MegaRAID"><meta name=description content="如何确定硬盘驱动器与smartctl、MegaRAID之间的对应关系"><meta name=author content><link rel=canonical href=https://gnail89.github.io/posts/find-disk-slot/><link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://gnail89.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://gnail89.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://gnail89.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://gnail89.github.io/apple-touch-icon.png><link rel=mask-icon href=https://gnail89.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.119.0"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="硬盘驱动器与物理硬盘对应关系"><meta property="og:description" content="如何确定硬盘驱动器与smartctl、MegaRAID之间的对应关系"><meta property="og:type" content="article"><meta property="og:url" content="https://gnail89.github.io/posts/find-disk-slot/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-06T19:41:40+08:00"><meta property="article:modified_time" content="2022-12-06T19:41:40+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="硬盘驱动器与物理硬盘对应关系"><meta name=twitter:description content="如何确定硬盘驱动器与smartctl、MegaRAID之间的对应关系"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://gnail89.github.io/posts/"},{"@type":"ListItem","position":3,"name":"硬盘驱动器与物理硬盘对应关系","item":"https://gnail89.github.io/posts/find-disk-slot/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"硬盘驱动器与物理硬盘对应关系","name":"硬盘驱动器与物理硬盘对应关系","description":"如何确定硬盘驱动器与smartctl、MegaRAID之间的对应关系","keywords":["smartctl","MegaRAID"],"articleBody":"工具 需要以下最新版本工具\nsmartctl\nMegaCli64\nlsscsi\n获取基本信息 使用lsscsi获取SCSI设备信息和属性 其中id的含义可以从/proc/scsi/scsi文件中简单获取。 [0:2:2:0]分别表示Host, Channel, Id, Lun\n# lsscsi -g [0:0:2:0] enclosu SAS/SATA Expander RevA - /dev/sg0 [0:2:0:0] disk LSI LSI 3.40 /dev/sda /dev/sg1 [0:2:1:0] disk LSI LSI 3.40 /dev/sdb /dev/sg2 [0:2:2:0] disk LSI LSI 3.40 /dev/sdc /dev/sg3 [0:2:3:0] disk LSI LSI 3.40 /dev/sdd /dev/sg4 [0:2:4:0] disk LSI LSI 3.40 /dev/sde /dev/sg5 [0:2:5:0] disk LSI LSI 3.40 /dev/sdf /dev/sg6 [0:2:6:0] disk LSI LSI 3.40 /dev/sdg /dev/sg7 [0:2:7:0] disk LSI LSI 3.40 /dev/sdh /dev/sg8 [0:2:8:0] disk LSI LSI 3.40 /dev/sdi /dev/sg9 [0:2:9:0] disk LSI LSI 3.40 /dev/sdj /dev/sg10 [0:2:10:0] disk LSI LSI 3.40 /dev/sdk /dev/sg11 [0:2:11:0] disk LSI LSI 3.40 /dev/sdl /dev/sg12 [0:2:12:0] disk LSI LSI 3.40 /dev/sdm /dev/sg13 # cat /proc/scsi/scsi Attached devices: Host: scsi0 Channel: 00 Id: 02 Lun: 00 Vendor: SAS/SATA Model: Expander Rev: RevA Type: Enclosure ANSI SCSI revision: 05 Host: scsi0 Channel: 02 Id: 00 Lun: 00 Vendor: LSI Model: LSI Rev: 3.40 Type: Direct-Access ANSI SCSI revision: 05 Host: scsi0 Channel: 02 Id: 01 Lun: 00 Vendor: LSI Model: LSI Rev: 3.40 Type: Direct-Access ANSI SCSI revision: 05 ... 使用MegaCli64获取硬盘信息 # 获取MegaRAID的bus id为：02:00.0 # lspci |grep MegaRAID 02:00.0 RAID bus controller: LSI Logic / Symbios Logic MegaRAID SAS 2208 # MegaCli64 -LdPdInfo -aALL |egrep \"Target Id:|Enclosure Device ID:|^Slot Number:|^Device Id:|^Inquiry Data:\" Virtual Drive: 0 (Target Id: 0) Enclosure Device ID: 2 Slot Number: 12 Device Id: 18 Inquiry Data: HGST xxxxxxxx xxxxxxxx Enclosure Device ID: 2 Slot Number: 13 Device Id: 19 Inquiry Data: HGST xxxxxxxx xxxxxxxx Virtual Drive: 1 (Target Id: 1) Enclosure Device ID: 2 Slot Number: 0 Device Id: 6 Inquiry Data: HGST xxxxxxxx xxxxxxxx Virtual Drive: 2 (Target Id: 2) Enclosure Device ID: 2 Slot Number: 1 Device Id: 14 Inquiry Data: YHH7HWLAA xxxxxxxx xxxxxxxx ... # MegaCli64 -pdInfo -PhysDrv[2:1] -aALL Enclosure Device ID: 2 Slot Number: 1 Drive's position: DiskGroup: 10, Span: 0, Arm: 0 Enclosure position: 1 Device Id: 14 WWN: 5000cca225d181c1 Sequence Number: 2 Media Error Count: 0 Other Error Count: 0 Predictive Failure Count: 0 Last Predictive Failure Event Seq Number: 0 PD Type: SATA ... 使用smartctl扫描设备 # smartctl --scan-open /dev/sda -d scsi # /dev/sda, SCSI device /dev/sdb -d scsi # /dev/sdb, SCSI device /dev/sdc -d scsi # /dev/sdc, SCSI device /dev/sdd -d scsi # /dev/sdd, SCSI device ... /dev/bus/0 -d sat+megaraid,3 # /dev/bus/0 [megaraid_disk_03] [SAT]，ATA device /dev/bus/0 -d sat+megaraid,11 # /dev/bus/0 [megaraid_disk_11] [SAT]，ATA device /dev/bus/0 -d sat+megaraid,14 # /dev/bus/0 [megaraid_disk_14] [SAT]，ATA device /dev/bus/0 -d sat+megaraid,17 # /dev/bus/0 [megaraid_disk_17] [SAT]，ATA device ... 方法 从lsscsi中可以得到设备ID 例子：[0:2:2:0] disk LSI … /dev/sdc ==\u003e Host id: 0 Channel id: 2 Target id: 2 # 对应MegaRAID中的Target id Lun id: 0\n从MegaCli64中可以得到设备的Target id，Enclosure Device ID，Slot Number，Inquiry Data等信息 例子：PhysDrv[2:1] Virtual Drive: 2 (Target Id: 2) # 对应scsi中的Target id Device Id: 14 # 对应smartctl中的megaraid id Enclosure Device ID: 2 Slot Number: 1 # 对应机箱槽位号 Inquiry Data: YHH7HWLAA xxxxxxxx xxxxxxxx # 硬盘序列号信息\n从smartctl中可以得到megaraid信息 /dev/bus/0 -d sat+megaraid,14 # 对应MegaRAID中Device id\n以/dev/sdc为例。\n/dev/sdc的scsi id为[0:2:2:0] =\u003e MegaRAID硬盘PhysDrv[2:1] =\u003e smartctl中megaraid,14\n通过序列号验证MegaRAID与smartctl的关系：\n# smartctl -a /dev/bus/0 -d sat+megaraid,14 |grep \"Serial Number\" Serial Number: YHH7HWLAA # MegaC1164 -pdInfo -PhysDrv[2:1] -aALL ... Enclosure Device ID: 2 Slot Number: 1 Device Id: 14 Inquiry Data: YHH7HWLAA xxxxxxxx xxxxxxxx ... ","wordCount":"520","inLanguage":"en","datePublished":"2022-12-06T19:41:40+08:00","dateModified":"2022-12-06T19:41:40+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://gnail89.github.io/posts/find-disk-slot/"},"publisher":{"@type":"Organization","name":"📕W.'s Blog","logo":{"@type":"ImageObject","url":"https://gnail89.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://gnail89.github.io accesskey=h title="📕W.'s Blog (Alt + H)">📕W.'s Blog</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://gnail89.github.io/search/ title=🔍Search><span>🔍Search</span></a></li><li><a href=https://gnail89.github.io/archives/ title=📚Archive><span>📚Archive</span></a></li><li><a href=https://gnail89.github.io/tags/ title=🔖Tags><span>🔖Tags</span></a></li><li><a href=https://gnail89.github.io/categories/ title=🧩Categories><span>🧩Categories</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://gnail89.github.io>Home</a>&nbsp;»&nbsp;<a href=https://gnail89.github.io/posts/>Posts</a></div><h1 class=post-title>硬盘驱动器与物理硬盘对应关系</h1><div class=post-description>如何确定硬盘驱动器与smartctl、MegaRAID之间的对应关系</div><div class=post-meta><span title='2022-12-06 19:41:40 +0800 +0800'>December 6, 2022</span>&nbsp;·&nbsp;3 min</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%b7%a5%e5%85%b7 aria-label=工具>工具</a></li><li><a href=#%e8%8e%b7%e5%8f%96%e5%9f%ba%e6%9c%ac%e4%bf%a1%e6%81%af aria-label=获取基本信息>获取基本信息</a></li><li><a href=#%e6%96%b9%e6%b3%95 aria-label=方法>方法</a></li></ul></div></details></div><div class=post-content><h1 id=工具>工具<a hidden class=anchor aria-hidden=true href=#工具>#</a></h1><blockquote><p>需要以下最新版本工具</p></blockquote><ul><li><p>smartctl</p></li><li><p>MegaCli64</p></li><li><p>lsscsi</p></li></ul><h1 id=获取基本信息>获取基本信息<a hidden class=anchor aria-hidden=true href=#获取基本信息>#</a></h1><ol><li>使用lsscsi获取SCSI设备信息和属性</li></ol><blockquote><p>其中id的含义可以从/proc/scsi/scsi文件中简单获取。<br>[0:2:2:0]分别表示Host, Channel, Id, Lun</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># lsscsi -g</span>
</span></span><span class=line><span class=cl><span class=o>[</span>0:0:2:0<span class=o>]</span>    enclosu SAS/SATA  Expander        RevA  -         /dev/sg0
</span></span><span class=line><span class=cl><span class=o>[</span>0:2:0:0<span class=o>]</span>    disk    LSI      LSI              3.40  /dev/sda   /dev/sg1
</span></span><span class=line><span class=cl><span class=o>[</span>0:2:1:0<span class=o>]</span>    disk    LSI      LSI              3.40  /dev/sdb   /dev/sg2
</span></span><span class=line><span class=cl><span class=o>[</span>0:2:2:0<span class=o>]</span>    disk    LSI      LSI              3.40  /dev/sdc   /dev/sg3
</span></span><span class=line><span class=cl><span class=o>[</span>0:2:3:0<span class=o>]</span>    disk    LSI      LSI              3.40  /dev/sdd   /dev/sg4
</span></span><span class=line><span class=cl><span class=o>[</span>0:2:4:0<span class=o>]</span>    disk    LSI      LSI              3.40  /dev/sde   /dev/sg5
</span></span><span class=line><span class=cl><span class=o>[</span>0:2:5:0<span class=o>]</span>    disk    LSI      LSI              3.40  /dev/sdf   /dev/sg6
</span></span><span class=line><span class=cl><span class=o>[</span>0:2:6:0<span class=o>]</span>    disk    LSI      LSI              3.40  /dev/sdg   /dev/sg7
</span></span><span class=line><span class=cl><span class=o>[</span>0:2:7:0<span class=o>]</span>    disk    LSI      LSI              3.40  /dev/sdh   /dev/sg8
</span></span><span class=line><span class=cl><span class=o>[</span>0:2:8:0<span class=o>]</span>    disk    LSI      LSI              3.40  /dev/sdi   /dev/sg9
</span></span><span class=line><span class=cl><span class=o>[</span>0:2:9:0<span class=o>]</span>    disk    LSI      LSI              3.40  /dev/sdj   /dev/sg10
</span></span><span class=line><span class=cl><span class=o>[</span>0:2:10:0<span class=o>]</span>   disk    LSI      LSI              3.40  /dev/sdk   /dev/sg11
</span></span><span class=line><span class=cl><span class=o>[</span>0:2:11:0<span class=o>]</span>   disk    LSI      LSI              3.40  /dev/sdl   /dev/sg12
</span></span><span class=line><span class=cl><span class=o>[</span>0:2:12:0<span class=o>]</span>   disk    LSI      LSI              3.40  /dev/sdm   /dev/sg13
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># cat /proc/scsi/scsi</span>
</span></span><span class=line><span class=cl>Attached devices:
</span></span><span class=line><span class=cl>Host: scsi0 Channel: <span class=m>00</span> Id: <span class=m>02</span> Lun: <span class=m>00</span>
</span></span><span class=line><span class=cl>  Vendor: SAS/SATA Model:  Expander        Rev: RevA
</span></span><span class=line><span class=cl>  Type:   Enclosure                        ANSI  SCSI revision: <span class=m>05</span>
</span></span><span class=line><span class=cl>Host: scsi0 Channel: <span class=m>02</span> Id: <span class=m>00</span> Lun: <span class=m>00</span>
</span></span><span class=line><span class=cl>  Vendor: LSI      Model: LSI              Rev: 3.40
</span></span><span class=line><span class=cl>  Type:   Direct-Access                    ANSI  SCSI revision: <span class=m>05</span>
</span></span><span class=line><span class=cl>Host: scsi0 Channel: <span class=m>02</span> Id: <span class=m>01</span> Lun: <span class=m>00</span>
</span></span><span class=line><span class=cl>  Vendor: LSI      Model: LSI              Rev: 3.40
</span></span><span class=line><span class=cl>  Type:   Direct-Access                    ANSI  SCSI revision: <span class=m>05</span>
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><ol start=2><li>使用MegaCli64获取硬盘信息</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 获取MegaRAID的bus id为：02:00.0</span>
</span></span><span class=line><span class=cl><span class=c1># lspci |grep MegaRAID</span>
</span></span><span class=line><span class=cl>02:00.0 RAID bus controller: LSI Logic / Symbios Logic MegaRAID SAS <span class=m>2208</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># MegaCli64 -LdPdInfo -aALL |egrep &#34;Target Id:|Enclosure Device ID:|^Slot Number:|^Device Id:|^Inquiry Data:&#34;</span>
</span></span><span class=line><span class=cl>Virtual Drive: <span class=m>0</span> <span class=o>(</span>Target Id: 0<span class=o>)</span>
</span></span><span class=line><span class=cl>Enclosure Device ID: <span class=m>2</span>
</span></span><span class=line><span class=cl>Slot Number: <span class=m>12</span>
</span></span><span class=line><span class=cl>Device Id: <span class=m>18</span>
</span></span><span class=line><span class=cl>Inquiry Data: HGST    xxxxxxxx xxxxxxxx
</span></span><span class=line><span class=cl>Enclosure Device ID: <span class=m>2</span>
</span></span><span class=line><span class=cl>Slot Number: <span class=m>13</span>
</span></span><span class=line><span class=cl>Device Id: <span class=m>19</span>
</span></span><span class=line><span class=cl>Inquiry Data: HGST    xxxxxxxx xxxxxxxx
</span></span><span class=line><span class=cl>Virtual Drive: <span class=m>1</span> <span class=o>(</span>Target Id: 1<span class=o>)</span>
</span></span><span class=line><span class=cl>Enclosure Device ID: <span class=m>2</span>
</span></span><span class=line><span class=cl>Slot Number: <span class=m>0</span>
</span></span><span class=line><span class=cl>Device Id: <span class=m>6</span>
</span></span><span class=line><span class=cl>Inquiry Data: HGST    xxxxxxxx xxxxxxxx
</span></span><span class=line><span class=cl>Virtual Drive: <span class=m>2</span> <span class=o>(</span>Target Id: 2<span class=o>)</span>
</span></span><span class=line><span class=cl>Enclosure Device ID: <span class=m>2</span>
</span></span><span class=line><span class=cl>Slot Number: <span class=m>1</span>
</span></span><span class=line><span class=cl>Device Id: <span class=m>14</span>
</span></span><span class=line><span class=cl>Inquiry Data: YHH7HWLAA            xxxxxxxx xxxxxxxx
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># MegaCli64 -pdInfo -PhysDrv[2:1] -aALL</span>
</span></span><span class=line><span class=cl>Enclosure Device ID: <span class=m>2</span>
</span></span><span class=line><span class=cl>Slot Number: <span class=m>1</span>
</span></span><span class=line><span class=cl>Drive<span class=err>&#39;</span>s position: DiskGroup: 10, Span: 0, Arm: <span class=m>0</span>
</span></span><span class=line><span class=cl>Enclosure position: <span class=m>1</span>
</span></span><span class=line><span class=cl>Device Id: <span class=m>14</span>
</span></span><span class=line><span class=cl>WWN: 5000cca225d181c1
</span></span><span class=line><span class=cl>Sequence Number: <span class=m>2</span>
</span></span><span class=line><span class=cl>Media Error Count: <span class=m>0</span>
</span></span><span class=line><span class=cl>Other Error Count: <span class=m>0</span>
</span></span><span class=line><span class=cl>Predictive Failure Count: <span class=m>0</span>
</span></span><span class=line><span class=cl>Last Predictive Failure Event Seq Number: <span class=m>0</span>
</span></span><span class=line><span class=cl>PD Type: SATA
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><ol start=3><li>使用smartctl扫描设备</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># smartctl --scan-open</span>
</span></span><span class=line><span class=cl>/dev/sda -d scsi <span class=c1># /dev/sda, SCSI device</span>
</span></span><span class=line><span class=cl>/dev/sdb -d scsi <span class=c1># /dev/sdb, SCSI device</span>
</span></span><span class=line><span class=cl>/dev/sdc -d scsi <span class=c1># /dev/sdc, SCSI device</span>
</span></span><span class=line><span class=cl>/dev/sdd -d scsi <span class=c1># /dev/sdd, SCSI device</span>
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>/dev/bus/0 -d sat+megaraid,3 <span class=c1># /dev/bus/0 [megaraid_disk_03] [SAT]，ATA device</span>
</span></span><span class=line><span class=cl>/dev/bus/0 -d sat+megaraid,11 <span class=c1># /dev/bus/0 [megaraid_disk_11] [SAT]，ATA device</span>
</span></span><span class=line><span class=cl>/dev/bus/0 -d sat+megaraid,14 <span class=c1># /dev/bus/0 [megaraid_disk_14] [SAT]，ATA device</span>
</span></span><span class=line><span class=cl>/dev/bus/0 -d sat+megaraid,17 <span class=c1># /dev/bus/0 [megaraid_disk_17] [SAT]，ATA device</span>
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><h1 id=方法>方法<a hidden class=anchor aria-hidden=true href=#方法>#</a></h1><ul><li>从lsscsi中可以得到设备ID</li></ul><blockquote><p>例子：[0:2:2:0] disk LSI &mldr; /dev/sdc ==><br>Host id: 0<br>Channel id: 2<br><strong>Target id: 2</strong> # 对应MegaRAID中的Target id<br>Lun id: 0</p></blockquote><ul><li>从MegaCli64中可以得到设备的Target id，Enclosure Device ID，Slot Number，Inquiry Data等信息</li></ul><blockquote><p>例子：PhysDrv[2:1]<br>Virtual Drive: 2 <strong>(Target Id: 2)</strong> # 对应scsi中的Target id<br><strong>Device Id: 14</strong> # 对应smartctl中的megaraid id<br>Enclosure Device ID: 2<br><strong>Slot Number: 1</strong> # 对应机箱槽位号<br>Inquiry Data: <strong>YHH7HWLAA</strong> xxxxxxxx xxxxxxxx # 硬盘序列号信息</p></blockquote><ul><li>从smartctl中可以得到megaraid信息</li></ul><blockquote><p>/dev/bus/0 -d sat+<strong>megaraid,14</strong> # 对应MegaRAID中Device id</p></blockquote><hr><blockquote><p>以/dev/sdc为例。</p></blockquote><ol><li><p>/dev/sdc的scsi id为[0:2:2:0] => MegaRAID硬盘PhysDrv[2:1] => smartctl中megaraid,14</p></li><li><p>通过序列号验证MegaRAID与smartctl的关系：</p></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># smartctl -a /dev/bus/0 -d sat+megaraid,14 |grep &#34;Serial Number&#34;</span>
</span></span><span class=line><span class=cl>Serial Number: YHH7HWLAA
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># MegaC1164 -pdInfo -PhysDrv[2:1] -aALL</span>
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>Enclosure Device ID: <span class=m>2</span>
</span></span><span class=line><span class=cl>Slot Number: <span class=m>1</span>
</span></span><span class=line><span class=cl>Device Id: <span class=m>14</span>
</span></span><span class=line><span class=cl>Inquiry Data: YHH7HWLAA            xxxxxxxx xxxxxxxx
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://gnail89.github.io/tags/smartctl/>smartctl</a></li><li><a href=https://gnail89.github.io/tags/megaraid/>MegaRAID</a></li></ul><nav class=paginav><a class=prev href=https://gnail89.github.io/posts/git-basics/><span class=title>« Prev Page</span><br><span>git基础</span></a>
<a class=next href=https://gnail89.github.io/posts/ssh-security/><span class=title>Next Page »</span><br><span>SSH Security</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://gnail89.github.io>📕W.'s Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>